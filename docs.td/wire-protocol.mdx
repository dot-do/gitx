---
title: Wire Protocol
description: Smart HTTP protocol implementation for Git fetch and push operations
---

The wire module implements Git's smart HTTP protocol, enabling standard Git clients to fetch from and push to your edge-hosted repositories.

## Ref Discovery

Handle the initial ref advertisement when clients connect:

```typescript
import { handleInfoRefs } from 'gitx.do/wire/smart-http'

const response = await handleInfoRefs(request, repository, {
  sideBand64k: true,
  ofsDelta: true
})
```

## Fetch Operations

Handle `git fetch` and `git clone` with upload-pack:

```typescript
import { handleUploadPack } from 'gitx.do/wire/smart-http'

const packResponse = await handleUploadPack(request, repository)
```

## Push Operations

Handle `git push` with receive-pack:

```typescript
import { handleReceivePack } from 'gitx.do/wire/smart-http'

const pushResponse = await handleReceivePack(request, repository)
```

## Protocol Capabilities

Parse and format protocol capabilities for negotiation:

```typescript
import { parseCapabilities, formatRefAdvertisement } from 'gitx.do/wire'

const caps = parseCapabilities(capLine)
const advert = formatRefAdvertisement(refs, capabilities)
```

## API Reference

| Function | Description |
|----------|-------------|
| `handleInfoRefs()` | Ref discovery endpoint |
| `handleUploadPack()` | Fetch data transfer |
| `handleReceivePack()` | Push data transfer |
| `formatRefAdvertisement()` | Format ref list |
| `parseCapabilities()` | Parse protocol capabilities |
